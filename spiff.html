    <!-- manual page source format generated by PolyglotMan v3.0.4-BeOS, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->

<HTML>
<HEAD>
<TITLE>SPIFF(1) manual page</TITLE>
</HEAD>
<BODY>
<A HREF="#toc">Table of Contents</A><P>
  
<H2><A NAME="sect0" HREF="#toc0">NAME </A></H2>
spiff - make controlled approximate comparisons between files 
  
<H2><A NAME="sect1" HREF="#toc1">SYNOPSIS </A></H2>
<B>spiff</B> [ <B>-s</B> script ] [ <B>-f</B> sfile ] [ <B>-bteviqcdwm</B> ] [ <B>-a</B> | <B>-r</B> value 
] -value file1 file2  
<H2><A NAME="sect2" HREF="#toc2">DESCRIPTION </A></H2>
<I>Spiff</I> compares the contents of  <B>file1</B> 
and <B>file2</B> and prints a description of the important differences between 
the files. White space is ignored except to separate other objects. <I>Spiff</I> 
maintains tolerances below which differences between two floating point 
numbers are ignored.  Differences in floating point notation (such as 3.4 
3.40 and 3.4e01) are treated as unimportant. User specified delimited strings 
(i.e. comments) can also be ignored. Inside other user specified delimited 
strings (i.e. quoted strings) whitespace can be significant. <P>
<I>Spiff's</I> operation 
can be altered via command line options, a command script, and with commands 
that are embedded in the input files. <P>
The following options affect <I>spiff's</I> 
overall operation. 
<DL>

<DT><B>-q</B>  </DT>
<DD>suppresses warning messages. </DD>

<DT><B>-v</B>  </DT>
<DD>use a visually oriented 
display.  Works only in MGR windows. </DD>
</DL>
<P>
<I>Spiff</I> has several flags to aid differencing 
of various programming languages. See EXAMPLES for a detailed description 
of the effects of these flags. 
<DL>

<DT><B>-C</B>  </DT>
<DD>treat the input files as C program source 
code. </DD>

<DT><B>-S</B>  </DT>
<DD>treat the input files as Bourne shell program source code. </DD>

<DT><B>-F</B>  </DT>
<DD>treat 
the input files as Fortran program source code. </DD>

<DT><B>-M</B>  </DT>
<DD>treat the input files 
as Modula-2 program source code. </DD>

<DT><B>-L</B>  </DT>
<DD>treat the input files as Lisp program 
source code. </DD>
</DL>
<P>
By default, the output looks somewhat similar in appearance 
to the output of <A HREF="/cgi-bin/man2html?diff&1">diff(1)</A>
.  Lines with differences are printed with the 
differences highlighted.  If stdout is a terminal, as determined by isatty(), 
then highlighting uses standout mode as determined by termcap. If stdout 
is not a tty, then the underlining (via underscore/backspace/char) is 
used to highlight differences. The following option can control the format 
of the ouput. 
<DL>

<DT><B>-t</B>  </DT>
<DD>produce output in terms of individual tokens.  This option 
is most useful for debugging as the output produced is verbose to the 
point of being unreadable. </DD>
</DL>
<P>
The following option controls the differencing 
algorithm. 
<DL>

<DT><B>-e</B>  </DT>
<DD>compare each token  in the files with the object in the same 
ordinal position in the other file.  If the files have a different number 
of objects, a warning message is printed and the objects at the end of 
the longer file are ignored. By default, <I>spiff</I> uses a Miller/Myers algorithm 
to find a minimal edit sequence that will convert the contents of the 
first file into the second. </DD>

<DT>-&lt;decimal-value&gt;  </DT>
<DD>sets a limit on the total number 
of insertions and deletions that will be considered. If the files differ 
by more than the stated amount, the program will give up, print a warning 
message, and exit. </DD>
</DL>
<P>
The following options control the command script.  More 
than one of each may appear at at time. The commands accumulate. 
<DL>

<DT><B>-f sfile</B> 
 </DT>
<DD>a command script to be taken from file <I>sfile</I> </DD>

<DT><B>-s command-script</B>  </DT>
<DD>causes 
the following argument to be taken as a command script. </DD>
</DL>
<P>
The following options 
control how individual objects are compared. 
<DL>

<DT><B>-b</B>  </DT>
<DD>treat all objects (including 
floating point numbers) as literals. </DD>

<DT><B>-c</B>  </DT>
<DD>ignore differences between upper 
and lower case. </DD>
</DL>
<P>
The following commands will control how the files are parsed. 

<DL>

<DT><B>-w</B>  </DT>
<DD>treat white space as objects.  Each white space character will be treated 
as a separate object when the program is comparing the files. </DD>

<DT><B>-m</B>  </DT>
<DD>treat 
leading sign characters ( + and - ) as separate even if they are followed 
by floating point numbers. </DD>

<DT><B>-d</B>  </DT>
<DD>treat integer decimal numbers (such as 1987) 
as real numbers (subject to tolerances) rather than as literal strings. 
</DD>
</DL>
<P>
The following three flags are used to set the default tolerances. The floating-point-numbers 
may be given in the formats accepted by <A HREF="/cgi-bin/man2html?atof&3">atof(3)</A>
. 
<DL>

<DT><B>-a floating-point-number</B> 
 </DT>
<DD>specifies an absolute value for the tolerance in floating point numbers. 
The flag <B>-a1e-2</B> will cause all differences greater than 0.01 to be reported. 
</DD>

<DT><B>-r floating-point-number</B>  </DT>
<DD>specifies a relative tolerance. The value given 
is interpreted as a fraction of the larger (in absolute terms)  of the 
two floating point numbers being compared. Thus, the flag <B>-r0.1</B> will cause 
the two floating point numbers 1.0 and 0.9 to be deemed within tolerance. 
The numbers 1.0 and 0.89 will be outside the tolerance. </DD>

<DT><B>-i</B>  </DT>
<DD>causes differences 
between floating point numbers to be ignored. </DD>
</DL>
<P>
If more than one <B>-a, -r,</B> or 
<B>-i</B> flag appear on the command line, the tolerances will be OR'd together 
(i.e. any difference that is within any of the tolerances will be ignored). 
 <P>
If no default tolerances is set on the command line, the program will 
use a default tolerance of <B>'-a 1e-10 -r 1e-10'.</B>  
<H2><A NAME="sect3" HREF="#toc3">SCRIPT COMMANDS </A></H2>
<P>
A script consists 
of commands, one per line. Each command consists of a keyword possibly 
followed by arguments. Arguments are separated by one or more tabs or spaces. 
The commands are: 
<DL>

<DT>literal BEGIN-STRING [END-STRING [ESCAPE-STRING]]  </DT>
<DD>Specifies 
the delimiters surrounding text that is to be treated as a single literal 
object. If only one argument is present, then only that string itself is 
treated as a literal. If only two arguments are present, they are taking 
as the starting and ending delimiters respectively.  If three arguments 
are present, they are treated as the start delimiter, end delimiter, and 
a string that may be used to escape an instance of the end delimiter. </DD>

<DT>beginchar 
BEGINNING-OF-LINE-CHARACTER  </DT>
<DD>Set the the beginning of line character for 
BEGIN-STRING's in comments. The default is '^'. </DD>

<DT>endchar END-OF-LINE-CHARACTER  </DT>
<DD>Set 
the end of line character for END-STRING's in comments. The default is '$'. 
</DD>

<DT>addalpha NEW-ALPHA-CHARACTER  </DT>
<DD>Add NEW-ALPHA-CHARACTER to the set of characters 
allowed in literal strings. By default,  <I>spiff</I> parses sequences of characters 
that begin with a letter and followed by zero or more letters or numbers 
as a single literal token.  This definition is overly restrictive when 
dealing with programming languages. For example, in the C programming language, 
the underscore character is allowed in identifiers.  </DD>

<DT>comment BEGIN-STRING 
[END-STRING [ESCAPE-STRING]]  </DT>
<DD>Specifies the delimiters surrounding text 
that is to be be ignored entirely (i.e. viewed as comments). The operation 
of the comment command is very similar to the literal command. In addition, 
if the END-STRING consists of only the end of line character, the end of 
line will delimit the end of the comment. Also, if the BEGIN-STRING starts 
with the beginning of line character, only lines that begin with the BEGIN-STRING 
will be ignored. </DD>
</DL>
<P>
More than one comment specification and more than one 
literal string specification may be specified at a time. 
<DL>

<DT>nestcom BEGIN-STRING 
[END-STRING [ESCAPE-STRING]]  </DT>
<DD>Similar to the comment command, but allows 
comments to be nested. Note, due to the design of the parser nested comments 
can not have a BEGIN-STRING that starts with the beginning of line character. 
  </DD>

<DT>resetcomments  </DT>
<DD>Clears the list of comment specifications. </DD>

<DT>resetliterals 
 </DT>
<DD>Clears the list of literal specifications. </DD>

<DT>tol [aVALUE|rVALUE|i|d . . . [ ; 
aVALUE|rVALUE|i|d . . . ] . . . ]  </DT>
<DD>set the tolerance for floating point comparisons. 
  The arguments to the tol command are a set of tolerance specifications 
separated by semicolons.  If more than one a,r,d, or i appears within a 
specification, then the tolerances are OR'd together (i.e. any difference 
that is within any tolerance will be ignored). The semantics of a,r, and 
i are identical to the <B>-a, -r,</B> and <B>-i</B> flags. The d means that the default 
tolerance (as specified by the invocation options) should be used. If more 
than one specification appears on the line, the first specification is 
applied to the first floating point number on each line, the second specification 
to the second floating point number one each line of the input files, 
and so on.  If there are more floating point numbers on a given line of 
input than tolerance specifications, the last specification is used repeatedly 
for all remaining floating point numbers on that line. </DD>

<DT>command STRING  
</DT>
<DD>lines in the input file that start with STRING will be interpreted as 
command lines. If no "command" is given as part of a <B>-s</B> or <B>-f</B> then it will 
be impossible to embed commands in the input files. </DD>

<DT>rem  </DT>
<DD></DD>

<DT>#  </DT>
<DD>used to places 
human readable remarks into a commands script. Note that the use of the 
'#' character differs from other command languages (for instance the Bourne 
shell). <I>Spiff</I> will only recognize the '#' as beginning a comment when it 
is the first non-blank character on the command line.  A '#' character appearing 
elsewhere will be treated as part of the command.  Cautious users should 
use 'rem'. Those hopelessly addicted to '#' as a comment character can have 
command scripts with a familiar format. </DD>
</DL>
<P>
Tolerances specified in the command 
scripts have precedence over the tolerance specified on the invocation 
command line. The tolerance specified in <I>file1</I> has precedence over the 
tolerance specified in <I>file2.</I> <P>
 
<H2><A NAME="sect4" HREF="#toc4">VISUAL MODE </A></H2>
If <I>spiff</I> is invoked with the 
-v option, it will enter an interactive mode rather than produce an edit 
sequence.  Three windows will be put on the screen. Two windows will contain 
corresponding segments of the input files. Objects that appear in both 
segments will be examined for differences and if any difference is found, 
the objects will be highlighted in reverse video on the screen.  Objects 
that appear in only one window will have a line drawn through them to 
indicate that they aren't being compared with anything in the other text 
window. The third window is a command window.  The command window will accept 
a single tolerance specification (followed by a newline) in a form suitable 
to the <B>tol</B> command.  The tolerance specified will then be used as the default 
tolerance and the display will be updated to highlight only those objects 
that exceed the new default tolerance.  Typing  <B>m</B> (followed by a newline) 
will display the next screenfull of text. Typing <B>q</B> (followed by a newline) 
 will cause the program to exit.  
<H2><A NAME="sect5" HREF="#toc5">LIMITS </A></H2>
Each input files can be no longer 
that 10,000 line long or contain more than 50,000 tokens. Longer files 
will be truncated. No line can be longer than 1024 characters.  Newlines 
will be inserted every 1024 character.  
<H2><A NAME="sect6" HREF="#toc6">EXAMPLES </A></H2>

<DL>

<DT>spiff -e -d foo bar  </DT>
<DD>this 
invocation (using exact match algorithm and treating integer numbers as 
if they were floats) is very useful for examining large tables of numbers. 
</DD>

<DT>spiff -0 foo bar  </DT>
<DD>compare the two files, quitting after the first difference 
is found. This makes the program operate roughly like <A HREF="/cgi-bin/man2html?cmp&1">cmp(1)</A>
. </DD>

<DT>spiff -0 -q 
foo bar  </DT>
<DD>same as the above, but no output is produced. The return code 
is still useful. </DD>

<DT>spiff -w -b foo bar  </DT>
<DD>will make the program operate much 
like <A HREF="/cgi-bin/man2html?diff&1">diff(1)</A>
. </DD>

<DT>spiff -a1e-5 -r0.001 foo bar  </DT>
<DD>compare the contents of the files 
foo and bar and ignore all differences between floating point numbers 
that are less than or equal to 0.00001 or 0.1% of the number of larger magnitude. 
</DD>

<DT>tol a.01 r.01  </DT>
<DD>will cause all differences between floating point numbers 
that are less than or equal to 0.01 or 1% of the number of larger magnitude 
to be ignored. </DD>

<DT>tol a.01 r.01 ; i  </DT>
<DD>will cause the tolerance in the previous 
example to be applied to the first floating point number on each line. 
 All differences between the second and subsequent floating point numbers 
on each line will be ignored. </DD>

<DT>tol a.01 r.01 ; i ; a.0001  </DT>
<DD>like the above except 
that only differences between the second floating point number on each 
line will be ignored. The differences between third and subsequent floating 
point numbers on each number will be ignored if they are less than or 
equal to 0.0001. </DD>

<DT>A useful script for examing C code is:  </DT>
<DD>literal  "    " 
   \  <BR>
 comment  /*  */ <BR>
 literal  &amp;&amp; <BR>
 literal  || <BR>
 literal  &lt;= <BR>
 literal  &gt;= <BR>
 literal 
 != <BR>
 literal  == <BR>
 literal  -- <BR>
 literal  ++ <BR>
 literal  &lt;&lt; <BR>
 literal  &gt;&gt; <BR>
 literal 
 -&gt; <BR>
 addalpha _ <BR>
 tol      a0 <BR>
 </DD>

<DT>A useful script for shell programs is:  </DT>
<DD>literal 
 '    '    \ <BR>
 comment  #    $ <BR>
 tol      a0 <BR>
 </DD>

<DT>A useful script for Fortran programs 
is:  </DT>
<DD>literal ' ' ' <BR>
 comment ^C $ <BR>
 tol     a0 <BR>
 </DD>

<DT>A useful script for Modula 2 
programs is:  </DT>
<DD>literal ' ' <BR>
 literal " " <BR>
 nestcom (* *) <BR>
 literal := <BR>
 literal 
&lt;&gt; <BR>
 literal &lt;= <BR>
 literal &gt;= <BR>
 tol     a0 <BR>
 </DD>

<DT>A useful script for Lisp programs 
is:  </DT>
<DD>literal " " <BR>
 comment ; $ <BR>
 tol     a0 <BR>
 </DD>
</DL>
 
<H2><A NAME="sect7" HREF="#toc7">DIAGNOSTICS </A></H2>
<I>Spiff's</I> exit status 
is 0 if no differences are found, 1 if differences are found, and 2 upon 
error.  
<H2><A NAME="sect8" HREF="#toc8">BUGS </A></H2>
In C code, escaped newlines will appear as differences. <P>
Comments 
are treated as token delimiters. <P>
Comments in Basic don't work right.  The 
line number is not ignored. <P>
Continuation lines in Fortran comments don't 
work. <P>
There is no way to represent strings specified using a Hollerith 
notation in Fortran. <P>
In formated English text, hyphenated words, movements 
in pictures, footnotes, etc. will be reported as differences. <P>
STRING's in 
script commands can not include whitespace. <P>
Visual mode does not handle 
tabs properly.  Files containing tabs should be run through <A HREF="/cgi-bin/man2html?expand&1">expand(1)</A>
 before 
trying to display them with visual mode. <P>
In visual mode, the text windows 
appear in a fixed size and font. Lines longer than the window size will 
not be handled properly. <P>
Objects (literal strings) that contain newlines 
cause trouble in several places in visual mode. <P>
Visual mode should accept 
more than one tolerance specification. <P>
When using visual mode or the exact 
match comparison algorithm, the program should do the parsing on the fly 
rather than truncating long files.  
<H2><A NAME="sect9" HREF="#toc9">AUTHOR </A></H2>
Daniel Nachbar  
<H2><A NAME="sect10" HREF="#toc10">COPYRIGHT </A></H2>
  
               Copyright (c) 1988 Bellcore <BR>
                      All Rights 
Reserved <BR>
 Permission is granted to copy or use this program, <BR>
 EXCEPT that 
it may not be sold for profit, the copyright <BR>
 notice must be reproduced 
on copies, and credit should <BR>
 be given to Bellcore where it is due. <BR>
   
       BELLCORE MAKES NO WARRANTY AND ACCEPTS <BR>
             NO LIABILITY 
FOR THIS PROGRAM. <BR>
 <P>
  <BR>
 
<H2><A NAME="sect11" HREF="#toc11">SEE ALSO </A></H2>
<A HREF="/cgi-bin/man2html?atof&3">atof(3)</A>
 <A HREF="/cgi-bin/man2html?isatty&2">isatty(2)</A>
 <A HREF="/cgi-bin/man2html?diff&1">diff(1)</A>
 <A HREF="/cgi-bin/man2html?cmp&1">cmp(1)</A>
 <A HREF="/cgi-bin/man2html?expand&1">expand(1)</A>
 
<A HREF="/cgi-bin/man2html?mgr&1L">mgr(1L)</A>
 <P>
"Spiff -- A Program for Making Controlled Approximate Comparisons 
of Files", by Daniel Nachbar. <P>
"A File Comparison Program" by Webb Miller 
and Eugene W. Myers in Software - Practice and Experience, Volume 15(11), 
pp.1025-1040, (November 1985). <P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">NAME</A></LI>
<LI><A NAME="toc1" HREF="#sect1">SYNOPSIS</A></LI>
<LI><A NAME="toc2" HREF="#sect2">DESCRIPTION</A></LI>
<LI><A NAME="toc3" HREF="#sect3">SCRIPT COMMANDS</A></LI>
<LI><A NAME="toc4" HREF="#sect4">VISUAL MODE</A></LI>
<LI><A NAME="toc5" HREF="#sect5">LIMITS</A></LI>
<LI><A NAME="toc6" HREF="#sect6">EXAMPLES</A></LI>
<LI><A NAME="toc7" HREF="#sect7">DIAGNOSTICS</A></LI>
<LI><A NAME="toc8" HREF="#sect8">BUGS</A></LI>
<LI><A NAME="toc9" HREF="#sect9">AUTHOR</A></LI>
<LI><A NAME="toc10" HREF="#sect10">COPYRIGHT</A></LI>
<LI><A NAME="toc11" HREF="#sect11">SEE ALSO</A></LI>
</UL>
</BODY></HTML>
